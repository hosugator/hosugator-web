---
created: 2025-11-13
tags:
  - aws_saa
  - cloudformation
  - stack
  - template
  - resource
  - analogy
reference:
  - https://docs.aws.amazon.com/cloudformation/latest/userguide/template-anatomy.html
  - "[[CloudFormation]]"
---

# AWS CloudFormation 이해하기
## 1. AWS 리소스란?
AWS에서 생성하는 모든 구성 단위를 뜻함.  
예시) EC2 인스턴스, 보안 그룹, S3 버킷, IAM 역할, RDS 데이터베이스, ALB 등
## 2. 템플릿(Template)이란?
리소스 레시피에 해당.  
YAML 또는 JSON 문서에 “이런 것들을 만들어 주세요” 라고 적어둔 설계도.
## 3. 스택(Stack)이란?
하나의 템플릿을 실행해서 탄생한 리소스 묶음.  
하나의 스택 안에서 생성된 리소스는 생명주기를 함께 함.
## 4. 비유로 쉽게 보기
- 템플릿 = 건축 설계도(도면)
- 스택 = 도면을 바탕으로 지어진 한 채의 건물(기둥, 벽, 지붕이 한 세트)
- 리소스 = 건물을 구성하는 기둥, 벽, 지붕, 문 등 각각의 재료
## 5. 스택으로 관리한다는 의미
- 일괄 생성 : 도면 한 장으로 기둥·벽·지붕을 한 번에 세움
- 일괄 업데이트 : 도면을 바꾸면 기둥만 교체 or 벽 두께 조정 등 차이점만 자동 적용
- 일괄 삭제 : 건물을 헐 때 기둥·벽·지붕을 하나도 남김 없이 치움
- 추적·롤백 : 건물 상태를 사진으로 찍어 두었다가 문제 발생 시 이전 사진으로 복원
## 6. 실제 예(웹 서비스)
템플릿(도면)에 다음을 적음 :
- VPC 하나
- 퍼블릭 서브넷 두 개
- 보안 그룹 하나(80 포트 개방)
- EC2 인스턴스 두 개
- ALB 하나
이 도면을 실행 → “웬만한 웹 서비스” 스택 하나 생성.  
나중에 인스턴스 타입만 t3.micro 에서 t3.small 으로 도면 수정 → 변경 세트 보고 적용 버튼만 누르면 EC2 두 대가 교체되고 나머지는 그대로.
## 7. 스택의 장점
- 반복 가능 : 같은 도면으로 개발·테스트·운영 모두 동일 인프라
- 버전 관리 : 도면을 Git에 넣어 인프라 히스토리 관리
- 드리프트 탐지 : 누가 기둥 색을 바꿔 놨을 때 알림
- 권한 정책 : “이 스택만 삭제 못 함” 등 IAM으로 보호
## 요약
리소스는 재료, 템플릿은 도면, 스택은 도면으로 지은 완성 건물.  
스택으로 관리하면 설계도 단위로 생성·수정·삭제·복원할 수 있어 인프라를 코드처럼 다룰 수 있음.