---
created: 2025-11-14
tags:
  - aws_saa
  - aws
  - cloudtrail
  - auditing
  - governance
  - security
  - logging
reference:
---
# AWS CloudTrail
## 정의
AWS 계정의 거버넌스, 규정 준수 및 위험 감사를 지원하기 위해 AWS 인프라 전체에서 사용자 활동 및 API 사용을 기록하는 서비스
## 원리
### 이벤트 기록
- 계정에서 발생하는 모든 API 호출 및 사용자 활동을 '이벤트'로 기록한다.
- 여기에는 누가(Who), 무엇을(What), 언제(When), 어디서(Where) 리소스에 접근하거나 변경했는지에 대한 세부 정보가 포함된다.
### 트레일(Trail)
- 기록된 이벤트를 지정된 [[S3]] 버킷에 저장하도록 구성하는 설정이다.
- 트레일을 생성하면 이벤트가 거의 실시간으로 기록되고 지정된 S3 버킷에 안전하게 보관된다.
## 요소
- 이벤트(Event): AWS 계정에서 발생하는 활동 기록이다. 관리 이벤트(Management Events)와 데이터 이벤트(Data Events)로 나뉜다.
- 관리 이벤트(Management Events): AWS 리소스의 구성 변경(예: [[EC2]] 인스턴스 시작, [[IAM]] 사용자 생성)과 같은 제어 영역 작업을 기록한다. 기본적으로 기록된다.
- 데이터 이벤트(Data Events): 데이터 플레인 작업(예: [[S3]] 버킷의 객체 읽기/쓰기, [[DynamoDB]] 테이블의 항목 읽기/쓰기)을 기록한다. 이는 선택 사항이며 추가 비용이 발생한다.
- 이벤트 기록(Event History): 지난 90일간의 관리 이벤트를 AWS 콘솔에서 볼 수 있는 기본 기능이다.
## 특징
- 전역 서비스: CloudTrail은 단일 서비스이지만, 기록된 이벤트는 모든 AWS 리전의 활동을 포괄하는 전역적인 뷰를 제공한다.
- 보안 및 규정 준수: 기록된 로그는 변경할 수 없으므로(Immutable) 보안 분석 및 SOX, HIPAA와 같은 규정 준수 감사에 사용된다.
- 로그 분석: 기록된 로그는 [[S3]]에 저장되며, [[Athena]]나 [[CloudWatch]] Logs Insight와 같은 서비스로 분석될 수 있다.
## 비교
| 구분     | CloudTrail                 | [[CloudWatch]]         |
| :----- | :------------------------- | :------------------------- |
| 주요 역할  | 거버넌스, 규정 준수, 보안 감사         | 성능, 상태, 애플리케이션 로그 모니터링     |
| 기록 데이터 | API 호출 및 사용자 활동 기록 (제어 영역) | 메트릭, 애플리케이션/OS 로그 (데이터 영역) |
| 목표     | 책임 추적 및 보안 사고 조사           | 운영 우수성 및 자동화된 대응           |
## 예시
- 보안 사고 조사:
    1. 데이터 유출 의심 사건 발생 시, CloudTrail 로그를 검색하여 누가, 언제, 어떤 [[IAM]] 자격 증명을 사용하여 민감한 [[S3]] 버킷에 접근했는지 확인한다.
    2. 로그는 [[S3]] 버킷에 안전하게 보존되어 있으며, Amazon Athena를 사용하여 SQL 쿼리로 방대한 로그 데이터를 분석하여 공격자의 활동 경로를 추적할 수 있다.