---
created: 2025-11-20
tags:
  - aws_saa
  - load_balancer
  - elb
  - alb
  - nlb
  - l7
  - l4
  - high_availability
reference:
---
# AWS Load Balancers (ALB, NLB, CLB)
## 정의
들어오는 애플리케이션 트래픽을 Amazon EC2 인스턴스, 컨테이너, Lambda 함수 등 다수의 대상(Target)에 자동으로 분산하여 애플리케이션의 가용성, 확장성 및 내결함성을 향상하는 서비스
## 요소
### Application Load Balancer (ALB)
애플리케이션 계층(Layer 7)에서 작동하는 로드 밸런서이다. HTTP/S 헤더 및 URL 경로(Path)를 기반으로 트래픽을 라우팅한다.
### Network Load Balancer (NLB)
전송 계층(Layer 4)에서 작동하는 로드 밸런서이다. IP 주소와 포트 번호를 기반으로 트래픽을 라우팅하며, 극도로 낮은 지연 시간과 높은 처리량을 제공한다.
### Classic Load Balancer (CLB)
이전 세대의 로드 밸런서로, L4 및 L7 계층에서 작동 가능하지만, 현재는 ALB나 NLB 사용을 권장한다.
### Target Group (대상 그룹)
트래픽을 수신할 EC2 인스턴스, Lambda 함수 등 대상들의 논리적인 그룹이다.
## 원리
### Traffic Distribution (트래픽 분산)
로드 밸런서는 등록된 대상들의 상태를 헬스 체크(Health Check)를 통해 지속적으로 확인하고, 정상적인 대상에게만 트래픽을 분산시킨다. 장애가 발생한 대상은 트래픽 분산에서 제외한다.
### Decoupling (애플리케이션 분리)
클라이언트의 요청을 로드 밸런서가 대신 수신하고 내부 트래픽을 분산함으로써, 클라이언트와 개별 백엔드 서버를 분리하여 느슨한 결합을 구현한다.
### Session Stickiness (세션 고정)
특정 클라이언트의 모든 요청을 동일한 대상(예: 웹 서버)으로 라우팅하여 세션 정보를 유지하도록 하는 기능이다. (주로 ALB에서 사용)
## 특징
### ALB의 경로 기반 라우팅
단일 로드 밸런서에서 URL 경로, 호스트 헤더, 쿼리 파라미터 등을 기반으로 서로 다른 서비스(마이크로서비스)를 다른 대상 그룹으로 라우팅할 수 있다. 이는 마이크로서비스 아키텍처에서 특히 유용하다.
### NLB의 성능
초당 수백만 건의 요청을 처리할 수 있도록 설계되었으며, 정적 IP 주소를 제공한다. 이는 방화벽 설정이 필요하거나, 극도로 낮은 지연 시간이 요구되는 게임 및 통신 워크로드에 필수적이다.
### Cross-Zone Load Balancing (가용 영역 간 로드 밸런싱)
로드 밸런서 노드가 모든 등록된 가용 영역의 대상에 트래픽을 분산시키도록 하여, 대상의 AZ 간 분포가 고르지 않더라도 트래픽을 균등하게 분산한다.
## 비교
| 구분 | ALB (Application Load Balancer) | NLB (Network Load Balancer) |
| :--- | :--- | :--- |
| 작동 계층 | L7 (애플리케이션 계층) | L4 (전송 계층) |
| 라우팅 기준 | URL 경로, 호스트 이름, HTTP 헤더 | IP 주소, 포트 번호 |
| 주요 프로토콜 | HTTP, HTTPS, gRPC | TCP, UDP, TLS |
| 지연 시간 | 높음 (L7 처리 오버헤드) | 가장 낮음 (L4 패킷 전달) |
| 이상적인 사용처 | 마이크로서비스, 웹 애플리케이션, 컨테이너 기반 트래픽 | 고성능, 낮은 지연 시간, 대규모 트래픽, 정적 IP 요구사항 |
## 예시
### 마이크로서비스 API 게이트웨이 구현
1. API Gateway를 사용하지 않고, ALB를 마이크로서비스의 진입점으로 사용한다.
2. 클라이언트의 요청이 ALB에 도착하면, ALB는 다음 규칙을 적용한다.
    - `example.com/api/users` 경로 트래픽은 사용자 서비스 대상 그룹(ECS)으로 라우팅한다.
    - `example.com/api/orders` 경로 트래픽은 주문 처리 서비스 대상 그룹(Lambda)으로 라우팅한다.
3. 이를 통해 단일 진입점으로 여러 서비스를 통합 관리하고, 각 서비스가 독립적으로 확장되도록 한다.