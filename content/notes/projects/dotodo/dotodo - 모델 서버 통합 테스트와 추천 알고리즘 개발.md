## NLP 에이전트와 추천 시스템 통합
### 초기 통합
LangChain 기반의 기존 추천 시스템 대신, 규칙 기반의 추천 로직을 `app.py` 파일의 `/process-text` 엔드포인트에 직접 통합하는 작업이었다. `NLPAgent`가 할 일 추출, 저장, 그리고 추천 항목 반환까지 모든 과정을 단일 파이프라인으로 처리하게 되었다.
### 추천 로직 개선
초기에 추천 결과가 의미 없이 높은 빈도수를 가진 항목을 반환하는 문제가 있었다. 이는 모든 테스트 더미 데이터가 동일한 날짜로 설정되어, 날짜 필터링 로직이 제대로 작동하지 않았기 때문이었다. 이 문제를 해결하기 위해, `recommender.py`를 수정하여 현재 입력된 할 일과 동일한 할 일은 추천 목록에서 제외하는 규칙을 추가하였다. 또한, 추천 목록을 사용자에게 더 유용하게 제공하기 위해 상위 3개의 추천 항목만 반환하도록 로직을 개선하는 작업이었다.
### 테스트 환경 구축 및 문제 해결
개선된 추천 로직을 검증하기 위해 여러 사용자 ID와 다양한 날짜를 포함한 `dummy_test_data.json` 파일을 생성하였다. 이 파일을 활용하여 ChromaDB에 더미 데이터를 삽입하는 스크립트를 작성하는 과정이었다. 이 과정에서 발생한 `__main__` 모듈을 찾을 수 없다는 오류는 파일 경로를 잘못 지정했기 때문이었고, 명령어 수정으로 해결되었다.
### API 응답 디버깅
더미 데이터 삽입 후 `/process-text` 엔드포인트 테스트 중, 요청에 사용한 `user_id`와 다른 `user_id`가 응답에 포함되는 문제가 발견되었다. 이는 API 호출 과정에서 `user_id`가 올바르게 전달되지 않았을 가능성이 높으며, 이로 인해 전혀 다른 사용자의 기록을 기반으로 한 추천 결과가 반환된 것이다.

#dotodo #AWS #추천알고리즘 