---
created: 2025-10-12
tags: [kdlc, time_series_split, train_validation_test, data_partitioning, model_type_split, deep_learning, tree_based_models]
reference:
  - "[[kdlc - hub]]"
---
> **Last revised:** `= dateformat(this.file.mtime, "yyyy-MM-dd HH:mm")`

# 학습 및 검증 데이터 분할 전략

## 핵심 용어 정의
### 데이터 분할 핵심 용어 정의표
| 용어 | 정의 |
| :--- | :--- |
| 시계열 분할 | 시간 순서(과거 -> 현재 -> 미래)를 엄격히 유지하여 데이터를 학습(Train), 검증(Validation), 테스트(Test) 셋으로 나누는 방식. |
| 스케일러 (Scaler) | 데이터의 값 범위를 조정하는 데 사용되는 도구/객체(예: MinMaxScaler, StandardScaler). |
| 스케일링 | 수치형 데이터의 크기나 범위를 일정하게 조정하여, 모델이 특정 변수의 큰 값에 영향을 받지 않도록 하는 전처리 과정. (예: 정규화, 표준화) |
| 정규화 | 데이터 범위를 0과 1 사이로 조정하는 스케일링 기법. 딥러닝 모델에서 주로 사용된다. |
| 딥러닝 모델용 (DL) | 뉴럴 네트워크 기반 모델(예: LSTM, GRU)을 위해 스케일링이 필수로 적용된 데이터셋. |
| 트리 계열 모델용 | 의사결정 나무 기반 모델(예: LightGBM, XGBoost)을 위해 스케일링이 생략되거나 다르게 처리된 데이터셋. |
| pkl 파일 | Python pickle 형식으로 저장된 파일로, 학습 데이터의 스케일링 정보를 담아 테스트 데이터 및 실제 예측 시 재사용하도록 한다. |

## 1. 시계열 데이터 분할 원칙
시계열 데이터는 시간의 흐름에 따라 패턴이 변화하므로, 미래를 예측하는 모델의 검증을 위해 랜덤 분할이 아닌 시간 순서에 따른 순차적 분할(Time Series Split)을 적용했다.
전체 데이터 기간 (2021년 1월 ~ 2024년 12월)을 다음과 같이 분할했다.

* Train (학습 데이터): 약 70% (과거 데이터)
* Validation (검증 데이터): 약 15% (중간 데이터, 하이퍼파라미터 튜닝용)
* Test (테스트 데이터): 약 15% (최근 데이터, 최종 성능 평가용)

## 2. 물류센터/거래 유형별 분할 기간
데이터의 시작일과 종료일이 물류센터 및 거래 유형별로 상이하여, 각 데이터셋에 맞춰 Train-Validation-Test 기간을 설정했다.

| 데이터셋 | Train 기간 | Validation 기간 | Test 기간 |
| :--- | :--- | :--- | :--- |
| A-Purchase | 2021-01-05 ~ 2023-10-06 | 2023-10-06 ~ 2024-05-27 | 2024-05-27 ~ 2024-12-31 |
| A-Sales | 2021-01-04 ~ 2023-09-21 | 2023-09-21 ~ 2024-05-23 | 2024-05-23 ~ 2024-12-31 |
| B-Purchase | 2021-01-05 ~ 2023-07-25 | 2023-07-25 ~ 2024-04-08 | 2024-04-09 ~ 2024-12-31 |
| B-Sales | 2021-01-31 ~ 2024-01-05 | 2024-01-05 ~ 2024-07-04 | 2024-07-04 ~ 2024-12-31 |

## 3. 모델 유형별 데이터 분리 및 스케일러 저장
학습에 사용될 모델 유형(딥러닝 계열 및 트리 계열)의 요구사항에 맞춰 데이터셋을 별도로 저장하고, 스케일링 정보를 관리했다.

### 3.1. 모델 유형별 데이터셋
데이터셋은 딥러닝(DL) 모델용과 트리 계열(Tree-based) 모델용으로 분리되었다.
* 딥러닝(DL) 모델용: 수치형 데이터에 대한 정규화/표준화 스케일링이 필수적으로 적용되어야 한다.
* 트리 계열 모델용 (예: LightGBM, XGBoost): 스케일링이 필요하지 않거나 다른 방식으로 처리되므로, 별도의 파일로 관리한다.

### 3.2. 스케일러 (Scaler) 파일 관리
각 모델과 데이터셋 조합에 사용된 스케일러 객체는 Python pickle(pkl) 파일로 저장되어, 예측 시 동일한 방식으로 데이터를 변환할 수 있도록 보장한다.

| 데이터셋       | 딥러닝 스케일러                 | 트리 스케일러                    |
| :--------- | :----------------------- | :------------------------- |
| A-Purchase | Scaler_A_Purchase_DL.pkl | Scaler_A_Purchase_Tree.pkl |
| A-Sales    | Scaler_A_Sales_DL.pkl    | Scaler_A_Sales_Tree.pkl    |
| B-Purchase | Scaler_B_Purchase_DL.pkl | Scaler_B_Purchase_Tree.pkl |
| B-Sales    | Scaler_B_Sales_DL.pkl    | Scaler_B_Sales_Tree.pkl    |
